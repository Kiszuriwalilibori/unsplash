{"version":3,"sources":["js/common.js","js/fixtures.js","redux/imagesReducer.js","redux/modalReducer.js","components/awaiting.jsx","components/App.jsx","reportWebVitals.js","index.js"],"names":["splitUrls","obj","thumb","small","regular","extractData","ary","map","item","result","id","urls","tags","description","alt_description","user","name","first_name","last_name","modal","twitter","twitter_username","createFormStyleLocationRelative","str","baseClass","getTags","Set","flat","title","getOptions","value","label","string","toUpperCase","slice","setBackground","backgroundURL","root","document","getElementById","style","background","backgroundSize","classList","add","accessKey","trending","getImages","createAction","getHints","clearHints","showError","clearError","setCount","chooseSubject","clearImages","setCollectionLength","showHintsMsg","hideHintsMsg","getBackgroundImage","checkNeighbours","initialState","images","hints","error","code","count","lastFetchedPage","subject","collectionLength","hintsMessageVisible","backgroundImage","currentNeighbours","imagesReducer","createReducer","builder","addCase","state","action","payload","temp","push","apply","index","findIndex","neighbours","pre","post","length","addDefaultCase","fetchHints","pattern","dispatch","getState","Unsplash","search","photos","then","toJson","json","results","catch","err","message","fetchImages","shouldFetch","total_pages","fetchBackgroundImage","getRandomPhoto","query","orientation","isMobile","window","matchMedia","matches","image","full","raw","showModal","hideModal","getDetails","modalReducer","isVisible","details","data","location","city","country","author","profile_image","previous","next","fetchDetails","getPhoto","Awaiting","Component","props","fallback","Results","lazy","Search","App","basename","process","exact","path","component","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","store","configureStore","reducer","middleware","getDefaultMiddleware","concat","thunk","ReactDOM","render"],"mappings":"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","file":"static/js/main.d5131c01.chunk.js","sourcesContent":["\r\n\r\nexport const splitUrls = obj => {\r\n  const thumb = obj.thumb ? obj.thumb + \" \" + \"200w\" + \", \" : \"\";\r\n  const small = obj.small ? obj.small + \" \" + \"400w\" + \", \" : \"\";\r\n  const regular = obj.regular ? obj.regular + \" \" + \"1080w\" + \", \" : \"\";\r\n  return thumb + small + regular;\r\n};\r\n\r\nexport const extractData = ary => {\r\n  let res = ary.map(item => {\r\n    let result = {};\r\n    result.id = item.id;\r\n    result.urls = splitUrls(item.urls);\r\n    result.tags = item.tags;\r\n    result.description = item.alt_description || item.description || \"\";\r\n    result.user =item.user?.name ||item.user.first_name + \" \" + item.user.last_name;\r\n    result.modal = {\r\n      name: item.user.name || item.first_name + \" \" + item.last_name || \"\",\r\n      twitter: item.user.twitter_username || \"\",\r\n    };\r\n    return result;\r\n  });\r\n  return res;\r\n};\r\n\r\nexport const createFormStyleLocationRelative = (str, baseClass) => {\r\n  switch (str) {\r\n    case \"/\":\r\n      return `${baseClass} form--search`;\r\n\r\n    case \"/images\":\r\n      return `${baseClass} form--images`;\r\n\r\n    default:\r\n      return `${baseClass} form--search`;\r\n  }\r\n};\r\n\r\nexport const getTags = ary => [\r\n  ...new Set(\r\n    ary\r\n      .map(item => item.tags)\r\n      .flat()\r\n      .map(item => item.title)\r\n  ),\r\n];\r\n\r\nexport function capitalizeFirstLetter(string) {\r\n  return string[0].toUpperCase() + string.slice(1);\r\n}\r\n\r\nexport const getOptions = ary =>\r\n  ary.map(item => {\r\n    return { value: item, label: capitalizeFirstLetter(item) };\r\n  });\r\n\r\nexport const setBackground = backgroundURL => {\r\n  var root = document.getElementById(\"root\");\r\n\r\n  if (backgroundURL) {\r\n    root.style.background = `url(${backgroundURL}) no-repeat center center fixed`;\r\n    root.style.backgroundSize = `cover`;\r\n  } else {\r\n    root.classList.add(\"root--fallback-background\");\r\n  }\r\n};\r\n","export const APP_ACCESS_KEY = \"DQqGbYve6sTIg4j9f9EPdU12FLtjyb4hiplBbNECOZA\";\r\n//export const APP_ACCESS_KEY = \"HjlzVyvVSsjd4F-NJ6IsI_DrtmEorpJd_oNwyPUtIBk\";\r\nexport const accessKey= { accessKey: APP_ACCESS_KEY}\r\n\r\nexport const trending =['flowers', 'wallpapers', 'backgrounds', 'happy','love'];\r\n\r\nexport const fallbackBackground ={\r\n    mobile: 'url(../images/background_mobile.jpg) no-repeat center center fixed',\r\n    small: 'background: url(../images/background_small.jpg) no-repeat center center fixed',\r\n    tablet: 'background: url(../images/background_tablet.jpg) no-repeat center center fixed',\r\n    desktop: 'background: url(../images/background_desktop.jpg) no-repeat center center fixed',\r\n    large:'background: url(../images/background.jpg) no-repeat center center fixed'\r\n}\r\n\r\n//HjlzVyvVSsjd4F-NJ6IsI_DrtmEorpJd_oNwyPUtIBk  access key\r\n//Txe901QEbdj8M6STepiZyZyxBT7nC09KvDJuRr6QeRE  secret key","import { createAction, createReducer} from \"@reduxjs/toolkit\";\r\n//const unsplash = createApi({ accessKey: 'MY_ACCESS_KEY' });\r\nimport Unsplash, { toJson } from \"unsplash-js\";\r\nimport { extractData, getOptions, getTags, setBackground} from \"../js/common\";\r\nimport { accessKey } from \"../js/fixtures\";\r\n\r\n\r\nexport const getImages = createAction(\"IMAGES_GET\");\r\nexport const getHints = createAction(\"HINTS_GET\");\r\nexport const clearHints = createAction(\"HINTS_CLEAR\");\r\nexport const showError = createAction(\"ERROR_SHOW\");\r\nexport const clearError = createAction(\"ERROR_CLEAR\");\r\nexport const setCount = createAction(\"COUNT_SET\");\r\nexport const chooseSubject = createAction(\"SUBJECT_CHOOSE\");\r\nexport const clearImages = createAction(\"IMAGES_CLEAR\");\r\nexport const setCollectionLength = createAction(\"COLLECTION_LENGTH_SET\");\r\nexport const showHintsMsg = createAction(\"HINTS_MESSAGE_SHOW\");\r\nexport const hideHintsMsg = createAction(\"HINTS_MESSAGE_HIDE\");\r\nexport const getBackgroundImage = createAction(\"GET_BACKGROUND_IMAGE\");\r\nexport const checkNeighbours =createAction(\"CURRENT_IMAGE_NEIGHBOURS_CHECK\");\r\n\r\nconst initialState = {\r\n  images: [],\r\n  hints: [],\r\n  error: { value: false, code: \"\" },\r\n  count: 0,\r\n  lastFetchedPage: 0,\r\n  subject: \"\",\r\n  collectionLength: 0,\r\n  hintsMessageVisible: false,\r\n  backgroundImage: {},\r\n  currentNeighbours: {}\r\n};\r\n\r\nconst imagesReducer = createReducer(initialState, builder => {\r\n  builder\r\n\r\n    .addCase(getImages, (state, action) => {\r\n      if (action.payload) {\r\n        let temp = [...state.images];\r\n        temp.push.apply(temp, extractData(action.payload));\r\n        state.images = temp;\r\n        state.lastFetchedPage++;\r\n      }\r\n    })\r\n\r\n    .addCase(setCollectionLength, (state, action) => {\r\n      if (action.payload) {\r\n        state.collectionLength = action.payload;\r\n      }\r\n    })\r\n\r\n    .addCase(checkNeighbours, (state, action) => {\r\n      if (action.payload) {\r\n        const index = state.images.findIndex((item=>{return(action.payload === item.id)}));\r\n        let neighbours={}\r\n        neighbours.pre = (index ===0)? false:true;\r\n        neighbours.post = (index === state.images.length -1)? false:true;\r\n        state.currentNeighbours = neighbours;\r\n      }\r\n    })\r\n\r\n    .addCase(getHints, (state, action) => {\r\n      if (action.payload) {\r\n        state.hints = action.payload;\r\n      }\r\n\r\n      if (action.payload.length) {\r\n        state.hintsMessageVisible = initialState.hintsMessageVisible;\r\n      } else {\r\n        state.hintsMessageVisible = true;\r\n      }\r\n    })\r\n    .addCase(setCount, (state, action) => {\r\n      if (action.payload) {\r\n        state.count = action.payload;\r\n      }\r\n    })\r\n\r\n    .addCase(clearHints, state => {\r\n      state.hints = initialState.hints;\r\n    })\r\n\r\n    .addCase(getBackgroundImage, (state, action) => {\r\n      state.backgroundImage = action.payload;\r\n    })\r\n\r\n    .addCase(hideHintsMsg, state => {\r\n      state.hintsMessageVisible = initialState.hintsMessageVisible;\r\n    })\r\n\r\n    .addCase(showHintsMsg, state => {\r\n      state.hintsMessageVisible = true;\r\n    })\r\n\r\n    .addCase(clearImages, (state, action) => {\r\n      state.lastFetchedPage = initialState.lastFetchedPage;\r\n      state.images = initialState.images;\r\n      state.subject = action.payload;\r\n    })\r\n\r\n    .addCase(showError, (state, action) => {\r\n      if (action.payload) {\r\n        state.error.value = true;\r\n        state.error.code = action.payload;\r\n      }\r\n    })\r\n    .addCase(clearError, state => {\r\n      state.error.value = false;\r\n      state.error.code = \"\";\r\n    })\r\n\r\n    .addCase(chooseSubject, (state, action) => {\r\n      if (action.payload) {\r\n        state.subject = action.payload;\r\n      }\r\n    })\r\n    .addDefaultCase(() => {});\r\n});\r\n\r\nexport default imagesReducer;\r\n\r\n/////////////////////////////////////////////////////////////////////////////////////////\r\n\r\nexport function fetchHints(pattern) {\r\n  return (dispatch, getState) => {\r\n    if (pattern && pattern.length > 3) {\r\n      const unsplash = new Unsplash(accessKey);\r\n      unsplash.search\r\n        .photos(pattern, 1, 30)\r\n        .then(toJson)\r\n        .then(json => {\r\n          dispatch(getHints(getOptions(getTags(json.results))));\r\n        })\r\n        .catch(err => {\r\n          dispatch(showError(err.message));\r\n        });\r\n    } else {\r\n      if (getState().images.hints.length) {\r\n        dispatch(clearHints());\r\n      }\r\n    }\r\n  };\r\n}\r\n\r\n///////////////////////////////////////////////////////////////////////////////\r\n\r\nexport function fetchImages(pattern) {\r\n  return (dispatch, getState) => {\r\n    const lastSubject = getState().images.subject;\r\n    var lastFetchedPage, collectionLength;\r\n    var shouldFetch = false;\r\n\r\n    if (lastSubject === pattern) {\r\n      collectionLength = getState().images.collectionLength;\r\n      lastFetchedPage = getState().images.lastFetchedPage;\r\n      if (collectionLength > lastFetchedPage) {\r\n        shouldFetch = true;\r\n      } else {\r\n        shouldFetch = false;\r\n        dispatch(showError(\"Nie ma więcej zdjęć w danej kategorii - nie próbuj ich pobrać\"));\r\n      }\r\n    } else {\r\n      dispatch(clearImages(pattern));\r\n      lastFetchedPage = initialState.lastFetchedPage;\r\n      shouldFetch = true;\r\n    }\r\n    if (shouldFetch) {\r\n      const unsplash = new Unsplash(accessKey);\r\n      unsplash.search\r\n        .photos(pattern, lastFetchedPage + 1, 30)\r\n        .then(toJson)\r\n        .then(json => {\r\n          dispatch(getImages(json.results));\r\n          dispatch(setCollectionLength(json.total_pages));\r\n        })\r\n        .catch(err => {\r\n          dispatch(showError(err.message));\r\n        });\r\n    }\r\n  };\r\n}\r\n\r\nexport function fetchBackgroundImage() {\r\n  return dispatch => {\r\n    const unsplash = new Unsplash(accessKey);\r\n    unsplash.photos\r\n      .getRandomPhoto({ query: \"nature\", orientation: \"landscape\" })\r\n      .then(toJson)\r\n      .then(json => {\r\n       \r\n        let isMobile = window.matchMedia(\"(max-width: 768px)\").matches;\r\n        var root = document.getElementById(\"root\");\r\n        root.style.backgroundSize = `cover`;\r\n        const image = isMobile ? json.urls?.small || json.urls?.regular || json.urls?.full || json.urls?.raw : json.urls?.regular || json.urls?.full || json.urls?.raw || json.urls?.small;\r\n\r\n        if (image) {\r\n          root.style.background = `url(${image}) no-repeat center center fixed`;\r\n          root.style.backgroundSize = `cover`;\r\n          setBackground(image);\r\n        } else {\r\n          setBackground();\r\n          \r\n        }\r\n      })\r\n      .catch(err => {\r\n        setBackground();\r\n        dispatch(showError(err.message));\r\n      });\r\n  };\r\n}\r\n","import { createAction, createReducer } from \"@reduxjs/toolkit\";\r\nimport Unsplash, { toJson } from \"unsplash-js\";\r\nimport { splitUrls } from \"../js/common\";\r\nimport {accessKey} from '../js/fixtures';\r\nimport {showError} from'./imagesReducer';\r\n\r\nexport const showModal = createAction(\"MODAL_SHOW\");\r\nexport const hideModal = createAction(\"MODAL_HIDE\");\r\nexport const getDetails = createAction(\"DETAILS_GET\");\r\n\r\nconst initialState = {\r\n  isVisible: false,\r\n  details: {},\r\n  error: ''\r\n};\r\n\r\nconst modalReducer = createReducer(initialState, builder => {\r\n  builder\r\n    \r\n    .addCase(showModal, (state) => {\r\n       \r\n        state.isVisible =true;\r\n              \r\n      })\r\n      .addCase(hideModal, (state) => {\r\n        state.isVisible =false;\r\n        \r\n      })  \r\n     \r\n      .addCase(getDetails, (state,action) => {\r\n       if (action.payload) {\r\n        \r\n        const {data, neighbours} = action.payload;\r\n        const details ={};\r\n        details.location = data.location?.city? data.location.city+', '+((data.location.country)? data.location.country:''):'';\r\n        details.author = data.user.name || data.user.last_name ||data.user.first_name ||'';\r\n        details.twitter =data.user.twitter_username ||'';\r\n        details.profile_image = data.user.profile_image.small ||'';\r\n        details.urls = data.urls? splitUrls(data.urls):'';\r\n        details.previous = neighbours.previous;\r\n        details.next = neighbours.next;\r\n        state.details = details;\r\n\r\n        if (state.details){state.isVisible = true}\r\n      }\r\n        \r\n      }) \r\n    .addDefaultCase(() => {});\r\n});\r\n\r\nexport default modalReducer;\r\n\r\n\r\nexport function fetchDetails(id) {\r\n  return (dispatch, getState) => {\r\n    \r\n    const unsplash = new Unsplash(accessKey);\r\n    \r\n    unsplash.photos.getPhoto(id)\r\n      .then(toJson)\r\n      .then(json => {\r\n        const images =getState().images.images;\r\n        \r\n        const index = images.findIndex((item=>{return(json.id === item.id)}));\r\n        let neighbours={}\r\n        neighbours.previous = (index ===0)? null:images[index -1 ].id;\r\n        neighbours.next = (index === images.length -1)? null:images[index+1].id;\r\n        const result = {data:json, neighbours:neighbours };\r\n        dispatch(getDetails(result));\r\n        \r\n      }).catch(err => {dispatch(showError(err.message))});\r\n  };\r\n}\r\n\r\n","import React, { Suspense } from \"react\";\r\nconst EmptyLoader = () => null;\r\nconst Awaiting = (Component) => {\r\n  return (props) => (\r\n    <Suspense fallback={EmptyLoader()}>\r\n      <Component {...props} />\r\n    </Suspense>\r\n  );\r\n};\r\nexport default Awaiting;\r\n","import { lazy } from \"react\";\nimport Awaiting from \"./awaiting\";\nimport \"../styles/App.css\";\nimport { BrowserRouter as Router, Switch, Route } from \"react-router-dom\";\n\nconst Results = lazy(() => import(\"./Results\"));\nconst Search = lazy(() => import(\"./SearchSection\"));\n\nfunction App() {\n  return (\n    <Router basename={process.env.PUBLIC_URL}>\n      <Switch>\n        <Route exact path=\"/\" component={Awaiting(Search)} />\n        <Route exact path=\"/images\" component={Awaiting(Results)} />\n      </Switch>\n    </Router>\n  );\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './styles/index.css';\nimport App from './components/App';\nimport reportWebVitals from './reportWebVitals';\nimport thunk from \"redux-thunk\";\nimport { Provider } from \"react-redux\";\nimport { configureStore } from '@reduxjs/toolkit';\nimport imagesReducer from './redux/imagesReducer';\nimport modalReducer from './redux/modalReducer';\n\nexport const store = configureStore({\n  reducer: {images:imagesReducer, modal:modalReducer},\n  middleware: (getDefaultMiddleware) => getDefaultMiddleware().concat(thunk),\n})\n\nReactDOM.render(\n  <Provider store={store}>\n    <App />\n  </Provider>,\n  document.getElementById(\"root\")\n);\n\n\nreportWebVitals();\n"],"sourceRoot":""}